<!DOCTYPE html>
<html>
<head>
	<title>MillGame</title>
	<link rel="stylesheet" type="text/css" href="css/estilos.css">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<body id="battle">
	<main id="main">
		<div id="poder"></div>
	
	<div class="boss" id="boss">
		<img src="Imagen2.png">
	</div>
	
<div class="control">
	<div class="preguntas" id="preguntas"><span id="countdown"></span>
		<div id="tituloPregunta" style="text-align:center; margin-bottom: 5px; "></div>
		<div id="respuestas" style="display: flex;flex-wrap: wrap; ">
			<ul id="answer">
				
			</ul>
		</div>
	</div>
		

	<div class="vida" id="vida">
		<div class="vidaMonstruo" style="margin: 10px;">
			<span id="nameMonster" style="color:steelblue;"> </span>:
			<span id="vidaMaximaM"></span> /
			<span id="contadorM"></span>
			<div id = "monto" style="width: 100%; height: 20px; background: white; "></div>

		</div><br>
		<div class="vidaPersonaje" style="margin: 10px;">
			<span >Personaje vit: </span>
			<span id="vidaMaximaP"></span> /
			<span id="contadorP"></span>
			<div id = "montoP" style="width: 100%; height: 20px; background: white; "></div>

		</div>
	</div>
	<div class="habilidad" id="habilidad">
		
		<button id="atacar">Ataque</button>
		<button>Magia</button> 
		<button>Elemento</button> 
		<button>Defender</button> 

		
	</div>
</div>
	</div>
</main>

<script type="text/javascript">
	
		//variables DOM
		const controlVida		  = document.getElementById('vida');
		const controlHabilidad    = document.getElementById('habilidad');
		const controlPreguntas    = document.getElementById('tituloPregunta');
		const controlRespuestas   = document.getElementById('respuestas');
		const contenedorPreguntas = document.getElementById('preguntas');
		const vidaMaxima          = document.getElementById('vidaMaximaM');
		const vidaMaximaP         = document.getElementById('vidaMaximaP');
		const contadorP           = document.getElementById('contadorP');
		const poder               = document.getElementById('poder');
		const monto               = document.getElementById('monto');
		const boss                = document.getElementById('boss');
		const nameMonster         = document.getElementById('nameMonster');
		var nivelAventura         = 0;
		var pp                    = 0;
		

		var ulRespuestas = document.getElementById('answer');
		
		//niveles	
		//preguntas 

	const preguntas = [{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cespedes',
			'Jhoan Rivero',
			'Christian Rivero',
			'Emilio Cespedes',
			 'Anderson Cespedes']
		
	},{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cespedades',
			'Jhoan Riasdavero',
			'Christianasd Rivero',
			'Emilio Cesasdapedes',
			 'Anderson Cesasdapedes']
		
	},{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cespedasdsaes',
			'Jhoan Riveadsasdro',
			'Christian Riasdadvero',
			'Emilio Cespxzcxzedes',
			 'Anderson Cespvcxvedes']
		
	},{
		pregunta1:'¿QUIEN ES EcvxL MAS SEXY?',
		respuestas:['Anderson xcvxCespedes',
			'Jhoan Rivecxvcvxro',
			'Christian Rxcvxvivero',
			'Emilio Cespexvxcvzdes',
			 'Anderson Ceszxczpedes']
		
	},{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cezcxzcspedes',
			'Jhoan Rivasdadsero',
			'Christian Rivzxczero',
			'Emilio Cespexczcdes',
			 'Anderson Cesvcxvpedes']
		
	},{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cezxczxspedes',
			'Jhoan Risadavero',
			'Christian Riverxzczco',
			'Emilio Cespevcxvdes',
			 'Anderson Cespecxvxdes']
		
	},{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cespexcvcdes',
			'Jhoan Riverxcvxo',
			'Christian Rivezxcxzro',
			'Emilio Cespedzxces',
			 'Anderson Ceszxcxzpedes']
		
	},{
		pregunta1:'¿QUIEN ES EL MAS SEXY?',
		respuestas:['Anderson Cespedes',
			'Jhoan Rivero',
			'Christian Rivero',
			'Emilio Cespedes',
			 'Anderson Cespedes']
		
	},
	{
		pregunta1:'¿QUIEN ES menos sexy?',
		respuestas:[
			'Anderds',
		'Ja',
			'Chd',
			'Emds',
			 'Anderds']
		

		}
	
	];



	//cuestionario

		function randomAnsw(minimo, maximo){
			return Math.round(Math.random()*(minimo-maximo) + maximo);
		}
	
//personaje
	class personaje{
		constructor(){
			this.monstruo = new monstruo();
			this.estadisticas = {
				habilidades:{
					'normal':4,
					'fuego':5,

				},
				fuerza:1,
				defensa:2,
				vit:20,
				minVit:0
			}

		}	
		niveldeataque(nivel, vidaActual){
			if (nivel == 'normal') {
				return (vidaActual * 100) / this.monstruo.estadisticas.vitMaxima + '%';
			}
		}
		fuerzaDeAtaque(tipodeataque, vidaActual){
			if (tipodeataque == 'normal') {
		
				return this.estadisticas.habilidades.normal * this.estadisticas.fuerza;
			}
			}
		dañoPersonaje(ataqueMonstruo){

				this.estadisticas.vit -= ((ataqueMonstruo + this.monstruo.estadisticas.fuerza) - this.estadisticas.defensa);
				return this.estadisticas.vit;
			
		}
	}


	//monstruo
	class monstruo{
		constructor(){
			this.name = 'Croco';
			this.png = 'Imagen2.png';
			this.poderes = [3,4,5,6];
			this.nombresPoderes = ['NORMAL', 'DESTRUCCION', 'ASESINO', 'TORNADO'];
			this.random = function() {
				return Math.round(Math.random()*(0-3) + 3);
			} 
			this.estadisticas = {
				vitMaxima:13,
				vit:13,
				minVit:0,
				fuerza:3,
				
			}
		}
		 ataque() {	
			return this.estadisticas.vit;
		}
		randomPower(){
			return this.poderes[this.random()]
		}
		randomNamePower(){
			return this.nombresPoderes[this.random()]
		}
	}	
		//instancias
		var cont = new monstruo();
		var cont1 = new personaje();
	
		//nivel

//controles
		function controles() {
		nameMonster.innerHTML = cont.name;
		controlVida.style.margin = '70px;';
		controlHabilidad.style.display = 'none';
		contenedorPreguntas.style.display = 'block';
		var ps = preguntas.length-1;
		var rp = randomAnsw(0, ps); 

			mamas(rp);
		}


		var totalTime = 30;
		var tiempoVerdadero = 30;
		function mamas(rp){
			var keys = Object.keys(preguntas[rp].respuestas);
			controlPreguntas.innerHTML = preguntas[rp].pregunta1;
			for (let i = 0; i < keys.length-1; i++) {
				ulRespuestas.innerHTML += "<button value= '"+ preguntas[rp].respuestas[i] + "'class = 'respuestas' onclick = 'delet(this,"+rp+");' id = 'respuestaDefinitiva"+i+"' >" + preguntas[rp].respuestas[i] +"</button>";
		}
	}
		
	window.onload = function(){	
		controles();
		//preguntas
		

//combate
		var counter = cont.ataque();
		var iniciovit = document.getElementById('contadorM').innerHTML = counter;
		vidaMaximaP.innerHTML = cont1.estadisticas.vit;
		vidaMaxima.innerHTML = cont.estadisticas.vit;
		var atacar = document.getElementById('atacar');
		contadorP.innerHTML = cont1.estadisticas.vit;

		atacar.addEventListener('click', function(){
			let ataqueNormal = 'normal';
			counter -= cont1.fuerzaDeAtaque(ataqueNormal, cont1.estadisticas.vit);
			monto.style.width = cont1.niveldeataque(ataqueNormal, counter); 		
			if (counter <= cont.estadisticas.minVit) {
				monto.style.width = '0';
				boss.style.opacity = 0;
				counter = cont.estadisticas.minVit;
			}	document.getElementById('main').className = 'white';
			let vitalidadJefe = document.getElementById('contadorM').innerHTML = counter;
			
			controles();
			
		});
		
	}

	function controlAtaque() {
		contenedorPreguntas.style.display = 'none';
		controlVida.style.display = 'flex';
		controlHabilidad.style.display = 'flex';
	}
	function delet(e,rp) {
			let daño = cont1.estadisticas.vit;
			pelea(e,rp);
			totalTime = tiempoVerdadero;


		}
		function pelea(e,rp) {
			if (e.value == preguntas[rp].respuestas[4]) {
				controlAtaque();
				pp += 2;ulRespuestas.innerHTML="";

			}
			else{
				ulRespuestas.innerHTML="";

				daño = cont1.dañoPersonaje(cont.randomPower());
				poder.innerHTML = cont.randomNamePower();
				controlAtaque();
				poder.style.opacity = 1;
						
				document.getElementById('main').className = 'red';
					if (daño <= cont1.estadisticas.minVit) {
						daño = 0;
					}
					if (daño <= 5) {
						contenedorPreguntas.style.background = 'red';
						controlVida.style.background = 'red';
						controlHabilidad.style.background = 'red';
					}
					contadorP.innerHTML = daño;

					if (poder.style.opacity == 1) {
						setTimeout(function () {
						poder.style.opacity = 0;	
						}, 3000);
					}
					}	
		}

</script>
</body>